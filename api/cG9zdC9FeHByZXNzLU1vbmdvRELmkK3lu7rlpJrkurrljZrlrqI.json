{"title":"Express+MongoDB搭建多人博客","date":"2017-09-12T16:00:00.000Z","author":"Mickey","excerpt":"","slug":"Express-MongoDB搭建多人博客","comments":true,"tags":["JavaScript","Node"],"categories":["技术博客"],"updated":"2018-07-03T07:02:46.709Z","content":"<blockquote>\n<p>本篇文章是Express + MongoDB搭建多人博客这个node初学项目的README.md，因为涉及一些项目开发过程中的问题和知识点的总结，对于初学node的同学应该有参考价值，所以在这里单独拿出分享一下。项目链接如下<a href=\"https://github.com/Mickey-Wang/blog\" target=\"_blank\" rel=\"noopener\"><i class=\"icon-github-alt\"></i>blog</a>。再分享一个与此项目相关的学习链接<a href=\"https://maninboat.gitbooks.io/n-blog/content\" target=\"_blank\" rel=\"noopener\"><i class=\"icon-hand-right\"></i>N-blog</a>。</p>\n</blockquote>\n<h2 id=\"node启动指令\"><a href=\"#node启动指令\" class=\"headerlink\" title=\"node启动指令\"></a>node启动指令</h2><ul>\n<li>利用node-inspector调试：node-debug -p 8081 app</li>\n<li>跨平台的设置环境变量并启动：cross-env NODE_ENV=test node app</li>\n<li>热更新启动：supervisor –harmony index</li>\n</ul>\n<h2 id=\"package-json中的包版本表示\"><a href=\"#package-json中的包版本表示\" class=\"headerlink\" title=\"package.json中的包版本表示\"></a>package.json中的包版本表示</h2><p>首先解释下版本号的命名，比如1.15.2。<br>  <code>1.15.2</code>对应就是<code>marjor version.minor version.patch version</code>。</p>\n<ul>\n<li>major version：这个版本号变化了表示有了一个不可以和上个版本兼容的大更改。</li>\n<li>minor version：这个版本号变化了表示有了增加了新的功能，并且可以向后兼容。</li>\n<li>patch version：这个版本号变化了表示修复了bug，并且可以向后兼容。</li>\n</ul>\n<p>然后解释例如~1.15.2和^3.3.4表示的意义。</p>\n<ul>\n<li>波浪符号（~）:<br>他会<strong>更新到当前minor version（也就是中间的那位数字）中最新的版本</strong>。放到我们的例子中就是：body-parser:~1.15.2，这个库会去匹配更新到1.15.x的最新版本，如果出了一个新的版本为1.16.0，则不会自动升级。波浪符号是曾经npm安装时候的默认符号，现在已经变为了插入符号。</li>\n<li>插入符号（^）:<br>这个符号就显得非常的灵活了，他将会<strong>把当前库的版本更新到当前major version（也就是第一位数字）中最新的版本</strong>。放到我们的例子中就是：bluebird:^3.3.4，这个库会去匹配3.x.x中最新的版本，但是他不会自动更新到4.0.0。</li>\n</ul>\n<p>因为major version变化表示可能会影响之前版本的兼容性，所以无论是波浪符号还是插入符号都不会自动去修改major version，因为这可能导致程序crush，可能需要手动修改代码。</p>\n<h2 id=\"本项目开发过程中遇到的问题及注意点\"><a href=\"#本项目开发过程中遇到的问题及注意点\" class=\"headerlink\" title=\"本项目开发过程中遇到的问题及注意点\"></a>本项目开发过程中遇到的问题及注意点</h2><ul>\n<li>关闭数据库。在打开一个MongoDB连接后，后续操作发生异常或执行完数据操作一定记着关闭该连接。</li>\n<li>如果在渲染ejs时，遇到<code>esc is not a function</code>报错信息，那么先排查一下在<code>res.render()</code>中传入ejs的参数是否正确。</li>\n<li>在数据操作中，<code>$</code>符号开头的参数均为mongoDB操作符，如<code>$inc</code>，应去mongoDB文档查询</li>\n</ul>\n<h2 id=\"基础功能\"><a href=\"#基础功能\" class=\"headerlink\" title=\"基础功能\"></a>基础功能</h2><ol>\n<li>多人注册、登录；</li>\n<li>发表文章（支持markdown）；</li>\n<li>上传文件；</li>\n<li>文章的编辑与删除；</li>\n<li>存档；</li>\n<li>标签；</li>\n<li>分页；</li>\n<li>留言（支持markdown）；</li>\n<li>用户个人主页；</li>\n<li>文章pv统计及留言统计；</li>\n<li>增加用户头像；</li>\n<li>标题关键字查询（支持有限的正则查询）；</li>\n<li>友情链接；</li>\n<li>404页面；</li>\n<li>转载功能；</li>\n<li>日志功能；</li>\n</ol>\n<h2 id=\"附加功能\"><a href=\"#附加功能\" class=\"headerlink\" title=\"附加功能\"></a>附加功能</h2><ol>\n<li>使用passport引入OAuth登录机制，github授权登录；</li>\n<li>使用mongoose；</li>\n<li>使用Async异步编程类库；</li>\n<li>使用kindEditor<a href=\"http://kindeditor.net/demo.php\" target=\"_blank\" rel=\"noopener\">富文本编辑器</a>；</li>\n<li>使用Handlebars<a href=\"http://handlebarsjs.com/\" target=\"_blank\" rel=\"noopener\">模板引擎</a>；</li>\n<li>使用Disqus第三方社会化评论系统；（介于国内网络原因，暂做了解）</li>\n</ol>\n","prev":{"title":"node实现的网站爬虫","slug":"node实现的网站爬虫"},"next":{"title":"从全国金融工作会议看乐视","slug":"从全国金融工作会议看乐视"},"link":"http://mickeywang.com/post/Express-MongoDB搭建多人博客"}